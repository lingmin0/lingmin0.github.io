[{"title":"数据库实验JDBC","url":"/2018/06/14/数据库实验8/","content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## 实验代码\n\n\n\n```java\nimport java.sql.*;\nimport java.util.Scanner;\npublic class myodbc {\n    public static Statement stmt=null;\n\n    static final String JDBC_DRIVER=\"com.mysql.jdbc.Driver\";//驱动\n    static final String DB_URL=\"jdbc:mysql://localhost:3306/course\";//URL 服务器localhost，端口号3306，数据库course\n\n    static final String USER=\"root\";//用户\n    static final String PASS=\"2712172\";//密码\n\n    public static void add_student(String sno,String sname,String ssex,String sage,String sdept){   //在student表中添加用户信息\n        try{\n            String a = \"INSERT INTO Student \" +\"VALUES ('\"+sno+\"','\"+ sname+\"','\"+ssex+\"',\"+sage+\",'\"+sdept+\"');\";\n            stmt.executeUpdate(a);\n            System.out.println(\"add su1ccess!\");\n        }\n        catch(SQLException se){se.printStackTrace();}\n    }\n\n    public static void print_Student(ResultSet rs){\n        try{\n\n            System.out.println(\"+Sno+-----+Sname+-----+Ssex+-----+Sage+-----+Sdept+\");\n            while(rs.next()){\n                String Sno  = rs.getString(\"Sno\");\n                String Sname = rs.getString(\"Sname\");\n                String Ssex = rs.getString(\"Ssex\");\n                String Sage= rs.getString(\"Sage\");\n                String Sdept=rs.getString(\"Sdept\");\n                System.out.println(Sno +\",     \"+Sname+\",     \"+Ssex+\",     \"+Sage+\",     \"+Sdept);\n            }\n            System.out.println(\" \");\n        }catch(SQLException se){se.printStackTrace();}\n    }\n\n    public static void update_student(String Sno,String column,String a){   //更新列属性年龄或者系\n        try{\n            String temp=\"111111\";//初始化\n            if(column.equals(\"Sage\")){//更新属性年龄\n                temp = \"UPDATE Student SET \"+column +\"=\"+a+\" where Sno='\"+Sno+\"'\";\n            }\n            else if(column.equals(\"Sdept\")) {//更新属性Sdept\n                temp = \"UPDATE Student SET \" + column + \"='\" + a + \"' where Sno='\" + Sno + \"'\";\n            }\n            stmt.executeUpdate(temp);\n            System.out.println(\"update success!\");\n        }\n        catch(SQLException se){se.printStackTrace();}\n    }\n\n    public static void delete_student(String Sno){   //学生学号\n        try{\n            String temp = \"DELETE FROM Student where Sno='\"+Sno+\"'\";//SQL语句\n            stmt.executeUpdate(temp);\n            System.out.println(\"delete success!\");\n        }\n        catch(SQLException se){se.printStackTrace();}\n    }\n\n\n    public static void main(String[] args) {\n        Connection conn = null;\n        try {\n            Scanner scanner = new Scanner(System.in);//输入流\n\n            Class.forName(\"com.mysql.jdbc.Driver\");//加载驱动\n            conn = DriverManager.getConnection(DB_URL, USER, PASS);//创建连接\n            stmt = conn.createStatement();//\n\n            while(true){//循环操作\n                System.out.println(\"查询请按0--插入请按1--更新请按2--删除请按3\");\n                int flags= Integer.parseInt(scanner.nextLine());\n                if(flags==0){                           //查询信息\n                    String sql=\"select * from Student;\";\n                    ResultSet rs= stmt.executeQuery(sql);\n                    print_Student(rs);\n                }\n                else if(flags==1){//表示插入        //插入操作\n                    System.out.println(\"请输入：Sno Sname Ssex Sage Sdept\");\n                    String nextLine = scanner.nextLine();//读入一行\n                    String[] str;\n                    str = nextLine.split(\",\");//用，作为分割\n                    add_student(str[0],str[1],str[2],str[3],str[4]);\n                }\n                else if(flags==2){//表示更新\n                    System.out.println(\"请输入更改的学生学号：Sno，更新内容属性-值：colunmn value\");\n                    String nextLine = scanner.nextLine();//读入一行\n                    String[] str;\n                    str = nextLine.split(\",\");//用，作为分割\n                    update_student(str[0],str[1],str[2]);\n                }\n                else if(flags==3){//表示删除\n                    System.out.println(\"请输入要删除的学生学号：Sno\");\n                    String Sno= scanner.nextLine();\n                    delete_student(Sno);\n                }\n                else\n                    break;\n            }\n            conn.close();//关闭连接\n        }catch(SQLException se){se.printStackTrace();}\n        catch(Exception e){e.printStackTrace();}\n        finally{\n            try{if(stmt!=null)stmt.close();}\n            catch(SQLException se2){ }// nothing we can do\n            try{\n                if(conn!=null)\n                    conn.close();//关闭连接\n            }catch(SQLException se){ se.printStackTrace();}//end finally try\n        }//end try\n    }\n}\n\n```\n\n\n"}]